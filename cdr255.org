#+options: ':nil *:t -:t ::t <:t H:3 \n:nil ^:t arch:headline
#+options: author:t broken-links:nil c:nil creator:nil
#+options: d:(not "LOGBOOK") date:t e:t email:nil f:t inline:t num:t
#+options: p:nil pri:nil prop:nil stat:t tags:t tasks:t tex:t
#+options: timestamp:t title:t toc:t todo:t |:t
#+title: cdr255 Website
#+date: <2021-09-29 Wed>
#+author: Christopher Rodriguez
#+email: cdr255@gmail.com
#+language: en
#+select_tags: export
#+exclude_tags: noexport
#+options: html-link-use-abs-url:nil html-postamble:auto
#+options: html-preamble:t html-scripts:t html-style:t
#+options: html5-fancy:nil tex:t
#+html_doctype: html5
#+html_container: div
#+description:
#+keywords:
#+html_link_home:
#+html_link_up:
#+html_mathjax:
#+html_equation_reference_format: \eqref{%s}
#+html_head:
#+html_head_extra:
#+subtitle:
#+infojs_opt:
#+creator: <a href="https://www.gnu.org/software/emacs/">Emacs</a> 28.0.50 (<a href="https://orgmode.org">Org</a> mode 9.4.6)
#+latex_header:
#+texinfo_filename:
#+texinfo_class: info
#+texinfo_header:
#+texinfo_post_header:
#+subtitle:
#+subauthor:
#+texinfo_dir_category:
#+texinfo_dir_title:
#+texinfo_dir_desc:
#+texinfo_printed_title:
#+man_class:
#+man_class_options:
#+man_header:
#+property: header-args :mkdirp yes
* Overview
  This is the literate programming file for my [[https://cdr255.com][main website]], which I'm
  using to convert my old website into an org-based format (and then
  keep it up to date).
* Build Script
  I'm basing this concept off of the [[https://www.youtube.com/watch?v=AfkrzFodoNw][System Crafters]] tutorial which
  was recently posted.

  The tutorial splits the build into an Elisp script that does all of
  the actual work, and a bash script that wraps it for an easier CI
  integration in the future.

  I don't think I'll need the CI integration here, but there's no real
  reason /not/ to separate it out like that.
** Elisp Build Script
   #+begin_src elisp :tangle bin/build-site.el
     ;; Initialize Packaging System
     (require 'package)
     (setq package-user-dir (expand-file-name "./.packages")
           package-archives '(("melpa" . "https://melpa.org/packages/")
                              ("elpa" . "https://elpa.gnu.org/packages/")))
     (package-initialize)
     (unless package-archive-contents
       (package-refresh-contents))
     
     ;; Install Dependencies
     (package-install 'htmlize)
     
     ;; Load the Publishing System
     (require 'ox-publish)
     
     ;; Customize our Variables
     (setq org-html-head-include-scripts nil ;; We're gonna use our own JS
           org-html-head-include-default-style nil  ;; We're gonna use our own CSS
           org-html-style "<link rel=\"stylesheet\" href=\"/style/main.css\">"
           org-html-head-extra "<meta charset=\"utf-8\">
                                             <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">
                                             <meta property=\"og:title\" content=\"cdr255\" />
                                             <meta name=\"author\" content=\"Christopher Rodriguez\" />
                                             <meta property=\"og:locale\" content=\"en_US\" />
                                             <link rel=\"canonical\" href=\"https://cdr255.com/\" />"
           org-html-doctype "html5"
           org-export-with-sub-superscripts '{})
     
     ;; Define our Publish Targets
     (setq org-publish-project-alist
           (list
            (list "cdr255-content"
                  :recursive t
                  :base-directory "./content"
                  :publishing-directory "./public"
                  :publishing-function 'org-html-publish-to-html
                  :with-author nil
                  :with-creator t
                  :with-toc nil
                  :section-numbers nil
                  :time-stamp-file nil
                  :auto-sitemap t
                  :makeindex t
                  :html-preamble "<header><a href=\"https://cdr255.com/\"><h1>cdr255</h1></a><nav><ul><li><a href=\"/\">Home</a></li><li><a href=\"/about/\">About</a></li><li><a>Music</a><div><ul><li><a href=\"/lessons/\">Lessons</a></li><li><a href=\"/compositions/\">Compositions</a></li><li><a href=\"/recordings/\">Recordings</a></li></ul></div></li><li><a>Games</a><div><ul><li><a href=\"/games/\">My Games</a></li><li><a href=\"/logs/\">TTRPG Logs</a></li><li><a href=\"/reviews/\">Reviews</a></li></ul></div></li><li><a>Fiction</a><div><ul><li><a href=\"/novels/\">Novel Drafts</a></li><li><a href=\"/serials/\">Serial Fiction</a></li><li><a href=\"/tintenn/\">Tintenn Archive</a></li></ul></div></li><li><a>Computers</a><div><ul><li><a href=\"/software/\">Software</a></li><li><a href=\"/support/\">Tech Support</a></li><li><a href=\"/linux/\">GNU/Linux</a></li><li><a href=\"/howtos/\">How-Tos</a></li></ul></div></li><li><a>Misc</a><div><ul><li><a href=\"/links/\">Links</a></li><li><a href=\"/conlangs/\">Conlangs</a></li><li><a href=\"/collections/\">Collections</a></li><li><a href=\"/stuff/\">Other Stuff</a></li></ul></div></li><li><a href=\"https://yewscion.com/\">Blog</a></li></ul></nav></header>"
                  :html-postamble "</main><footer><p class=\"author\">Original Content &copy;2021 Christopher Rodriguez, made using %c. %v!</p>
               <p class=\"attributions\">Background from <a href=\"https://www.svgbackgrounds.com/\">SVGBackgrounds</a>. Org Publish method from <a href=\"https://systemcrafters.cc/\">System Crafters</a>. Fonts from <a href=\"https://fonts.google.com/\">Google Fonts</a>.</p>
               <p class=\"badges\"><a rel=\"license\" href=\"http://creativecommons.org/licenses/by-sa/4.0/\"><img alt=\"Creative Commons BY-SA License 4.0\" style=\"border-width:0;\" src=\"https://i.creativecommons.org/l/by-sa/4.0/88x31.png\" /></a>&nbsp;&nbsp;&nbsp;&nbsp;<a rel=\"license\" href=\"https://www.gnu.org/licenses/lgpl-3.0.en.html\"><img alt=\"GNU Lesser General Public License 3.0+\" style=\"border-width:0\" src=\"/assets/lgplv3.png\" /></a></p></footer>"
                  :html-html5-fancy t)
            (list "cdr255-assets"
                  :recursive t
                  :base-directory "./content"
                  :publishing-directory "./public"
                  :publishing-function 'org-publish-attachment
                  :base-extension "css\\|js\\|png\\|jpg\\|gif\\|pdf\\|flac\\|ogg\\|txz")))
     
     ;; Publish Everything!
     (org-publish-all t)
     
     ;; Tell the User
     (message "Build Complete!")
     
   #+end_src
** Bash Wrapper Script
   #+begin_src bash :shebang #!/usr/bin/env bash :tangle build.sh
     emacs -Q --script ./bin/build-site.el
   #+end_src
* Pages
** Index
   #+begin_src org :tangle content/index.org
     
     ,* Last Update
     
       ,#+ATTR_HTML: :class nb
       2021-10-01
     
       Decided to finally do a renovation on this site.
     
       (The last update was over three years ago, so I'd say it was long
       overdue!)
     
       I'm mostly keeping the content the same for now, as I want to focus
       on converting the old site to the new format first.
     
       -----
     
     ,* Today's Specials
       :PROPERTIES:
       :HTML_CONTAINER_CLASS: grid
       :END:
     ,** Music
       ,#+begin_export html
       <iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/301008371&color=%2364b6d7&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true"></iframe><div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"><a href="https://soundcloud.com/cdr255" title="cdr255" target="_blank" style="color: #cccccc; text-decoration: none;">cdr255</a> · <a href="https://soundcloud.com/cdr255/thirteen-point-three" title="Thirteen Point Three" target="_blank" style="color: #cccccc; text-decoration: none;">Thirteen Point Three</a>
       ,#+end_export
     
     ,** Fiction
          [[http://proseandprosody.com/baud01-alone-in-detainment/][BꜶD 01]]
     
          It was silent, save for the fan in the corner.
     
          These big, metal boxes with grates on four sides were
          everywhere, and they all worked tirelessly to do two things: take
          in the old, stale air and revitalize it for another use, and pump
          the result back out into the same room. They were absolutely
          necessary, in a place with no trees or other flora to do the same
          job, and because of this it was vital that they remain clean and
          in working order.
     
     ,** Games
        - [[http://cdr255.com/games/falode/falodian-backgrounds/][Falodian Backgrounds]]
     
          ,#+begin_quote
          The Dorscht Seeker, Ehdrin Traveler, Falodian Noble/Commoner,
          Khula Trader, and Viliniti Diasporan backgrounds, for use in True20.
          ,#+end_quote
     
        ,#+begin_export html
        </div>
        ,#+end_export
        ,#+end_flexbox
     
        ,#+HTML: </div>
   #+end_src
* Style
  #+begin_src css :tangle content/style/main.css
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,400;0,700;1,400;1,700&family=Press+Start+2P&display=swap');
    
    html {
        background-color: #FFFBF7;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2000 1500'%3E%3Cdefs%3E%3Crect stroke='%23FFFBF7' stroke-width='0.2' width='1' height='1' id='s'/%3E%3Cpattern id='a' width='3' height='3' patternUnits='userSpaceOnUse' patternTransform='scale(7.25) translate(-862.07 -646.55)'%3E%3Cuse fill='%23fcf8f5' href='%23s' y='2'/%3E%3Cuse fill='%23fcf8f5' href='%23s' x='1' y='2'/%3E%3Cuse fill='%23faf6f2' href='%23s' x='2' y='2'/%3E%3Cuse fill='%23faf6f2' href='%23s'/%3E%3Cuse fill='%23f7f3ef' href='%23s' x='2'/%3E%3Cuse fill='%23f7f3ef' href='%23s' x='1' y='1'/%3E%3C/pattern%3E%3Cpattern id='b' width='7' height='11' patternUnits='userSpaceOnUse' patternTransform='scale(7.25) translate(-862.07 -646.55)'%3E%3Cg fill='%23f5f1ed'%3E%3Cuse href='%23s'/%3E%3Cuse href='%23s' y='5' /%3E%3Cuse href='%23s' x='1' y='10'/%3E%3Cuse href='%23s' x='2' y='1'/%3E%3Cuse href='%23s' x='2' y='4'/%3E%3Cuse href='%23s' x='3' y='8'/%3E%3Cuse href='%23s' x='4' y='3'/%3E%3Cuse href='%23s' x='4' y='7'/%3E%3Cuse href='%23s' x='5' y='2'/%3E%3Cuse href='%23s' x='5' y='6'/%3E%3Cuse href='%23s' x='6' y='9'/%3E%3C/g%3E%3C/pattern%3E%3Cpattern id='h' width='5' height='13' patternUnits='userSpaceOnUse' patternTransform='scale(7.25) translate(-862.07 -646.55)'%3E%3Cg fill='%23f5f1ed'%3E%3Cuse href='%23s' y='5'/%3E%3Cuse href='%23s' y='8'/%3E%3Cuse href='%23s' x='1' y='1'/%3E%3Cuse href='%23s' x='1' y='9'/%3E%3Cuse href='%23s' x='1' y='12'/%3E%3Cuse href='%23s' x='2'/%3E%3Cuse href='%23s' x='2' y='4'/%3E%3Cuse href='%23s' x='3' y='2'/%3E%3Cuse href='%23s' x='3' y='6'/%3E%3Cuse href='%23s' x='3' y='11'/%3E%3Cuse href='%23s' x='4' y='3'/%3E%3Cuse href='%23s' x='4' y='7'/%3E%3Cuse href='%23s' x='4' y='10'/%3E%3C/g%3E%3C/pattern%3E%3Cpattern id='c' width='17' height='13' patternUnits='userSpaceOnUse' patternTransform='scale(7.25) translate(-862.07 -646.55)'%3E%3Cg fill='%23f2eeea'%3E%3Cuse href='%23s' y='11'/%3E%3Cuse href='%23s' x='2' y='9'/%3E%3Cuse href='%23s' x='5' y='12'/%3E%3Cuse href='%23s' x='9' y='4'/%3E%3Cuse href='%23s' x='12' y='1'/%3E%3Cuse href='%23s' x='16' y='6'/%3E%3C/g%3E%3C/pattern%3E%3Cpattern id='d' width='19' height='17' patternUnits='userSpaceOnUse' patternTransform='scale(7.25) translate(-862.07 -646.55)'%3E%3Cg fill='%23FFFBF7'%3E%3Cuse href='%23s' y='9'/%3E%3Cuse href='%23s' x='16' y='5'/%3E%3Cuse href='%23s' x='14' y='2'/%3E%3Cuse href='%23s' x='11' y='11'/%3E%3Cuse href='%23s' x='6' y='14'/%3E%3C/g%3E%3Cg fill='%23efebe8'%3E%3Cuse href='%23s' x='3' y='13'/%3E%3Cuse href='%23s' x='9' y='7'/%3E%3Cuse href='%23s' x='13' y='10'/%3E%3Cuse href='%23s' x='15' y='4'/%3E%3Cuse href='%23s' x='18' y='1'/%3E%3C/g%3E%3C/pattern%3E%3Cpattern id='e' width='47' height='53' patternUnits='userSpaceOnUse' patternTransform='scale(7.25) translate(-862.07 -646.55)'%3E%3Cg fill='%23883600'%3E%3Cuse href='%23s' x='2' y='5'/%3E%3Cuse href='%23s' x='16' y='38'/%3E%3Cuse href='%23s' x='46' y='42'/%3E%3Cuse href='%23s' x='29' y='20'/%3E%3C/g%3E%3C/pattern%3E%3Cpattern id='f' width='59' height='71' patternUnits='userSpaceOnUse' patternTransform='scale(7.25) translate(-862.07 -646.55)'%3E%3Cg fill='%23883600'%3E%3Cuse href='%23s' x='33' y='13'/%3E%3Cuse href='%23s' x='27' y='54'/%3E%3Cuse href='%23s' x='55' y='55'/%3E%3C/g%3E%3C/pattern%3E%3Cpattern id='g' width='139' height='97' patternUnits='userSpaceOnUse' patternTransform='scale(7.25) translate(-862.07 -646.55)'%3E%3Cg fill='%23883600'%3E%3Cuse href='%23s' x='11' y='8'/%3E%3Cuse href='%23s' x='51' y='13'/%3E%3Cuse href='%23s' x='17' y='73'/%3E%3Cuse href='%23s' x='99' y='57'/%3E%3C/g%3E%3C/pattern%3E%3C/defs%3E%3Crect fill='url(%23a)' width='100%25' height='100%25'/%3E%3Crect fill='url(%23b)' width='100%25' height='100%25'/%3E%3Crect fill='url(%23h)' width='100%25' height='100%25'/%3E%3Crect fill='url(%23c)' width='100%25' height='100%25'/%3E%3Crect fill='url(%23d)' width='100%25' height='100%25'/%3E%3Crect fill='url(%23e)' width='100%25' height='100%25'/%3E%3Crect fill='url(%23f)' width='100%25' height='100%25'/%3E%3Crect fill='url(%23g)' width='100%25' height='100%25'/%3E%3C/svg%3E");
        background-attachment: fixed;
        background-size: cover;
    }
    
    body {
        max-width: 70%;
        margin: auto;
        background-color: #FFFBF7;
        padding: 1.5em;
        font-family: 'Montserrat', sans-serif;
        font-size: small;
        border-right: 0.2em solid #683600;
        border-left: 0.2em solid #683600;
    }
    
    a:link {
        text-decoration: none;
        color: #683600;
    }
    
    a:visited {
        text-decoration: none;
    }
    
    a:hover {
        text-decoration: underline;
    }
    
    a:active {
        text-decoration: none;
    }
    
    ::selection {
        background: #683600;
        color: #FFFBF7;
    }
    
    header {
        display: flex;
        align-items: baseline;
        margin: auto;
    }
    
    header > a > h1 {
        font-family: 'Press Start 2P', cursive;
        font-size: x-large;
        text-align: left;
        padding-left: 1em;
        font-size: 2em;
        color: #683600;
        margin-right: 2em;
        background-color: #FFFBF7;
    }
    
    header > a:link {
        color: black;
    }
    header > a:visited {
        color: black;
    }
    header > a:hover {
        color: #683600;
        text-decoration: none;
    }
    header > a:active {
        color: #683600;
        background-color: #EEEAE6;
    }
    
    /* Navigation */
    header > nav {
        background-color: #FFFBF7;
        margin-right: auto;
    }
    
    
    nav ul {
        margin: 0;
        margin-left: 1em;
        padding: 0;
    }
    
    nav ul li {
        display: inline-block;
        list-style-type: none;
        transition: all 0.4s;
    }
    nav > ul > li > a {
        color: #683600;
        display: block;
        line-height: 3em;
        padding: 0 2em;
        text-decoration: none;
    }
    nav > ul > li:hover {
        background-color: #683600;
    }
    nav > ul > li:hover > a {
        color: #FBF7F3;
    }
    /* Show Hidden Parts of Nav Menu on Hover. */
    nav > ul > li:hover > div {
        display: block;
        opacity: 1;
        visibility: visible;
    }
    nav > ul > li > div {
        background-color: #683600;
        position: absolute; /* Prevents Menu Jumping on Hover */
        visibility: hidden;
        z-index: 100;
        transition: opacity 0.4s;
    }
    nav > ul > li > div > ul > li {
        display: block;
        transition: opacity 0.4s;
    }
    nav > ul > li > div > ul > li > a {
        display: block;
        padding: 1em;
        text-decoration: none;
    }
    nav > ul > li > div > ul > li > a:link {
        color: #FBF7F3;
        transition: opacity 0.4s;
    }
    nav > ul > li > div > ul > li > a:hover {
        color: #FBF7F3;
    }
    
    /* Main Content */
    #content {
        background-color: #FBF7F3;
        padding: 2em;
        padding-top: 0;
        margin: auto;
        width: 80%;
        min-height: 25em;
        overflow: hidden;
    }
    #content h2 {
        color: #683600;
    }
    #content h3 {
        color: #683600;
    }
    #content h4 {
        background-color: #333;
        color: #CCC; }
    
    /* Images */
    #content img {
        max-width: 200px;
        border: 1px solid #683600; }
    
    /* Definition Lists */
    #content dt {
        font-weight: bold;
    }
    
    /* Tables */
    #content table {
        display: table;
        max-width: 90%;
        margin-left: 0;
    }
    #content table td {
        display: table-cell;
    }
    #content table th {
        display: table-cell;
    }
    #content blockquote {
        font-family: "Montserrat", monospace;
        font-size: small;
        font-style: italic;
        padding: 8px;
        text-align: center;
        background-color: rgba(100, 50, 0, 0.1);
        border: 1px solid #683600;
        display: block;
        max-width: 80%;
        margin: auto;
        margin-top: 1em;
        margin-bottom: 1em;
        line-height: 2em;
    }
    
    /* Footer */
    footer {
        text-align: center;
        font-size: x-small;
        max-width: 45%;
        margin: auto;
        background-color: rgba(100,50,0,0.1);
        border: 1px solid #683600;
    }
    
    /* Class Extensions to Style */
    .strikethrough {
        text-decoration: line-through;
    }
    .nb {
        font-style: italic;
        font-size: x-small;
    }
    .grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
        grid-template-rows: 1fr 1fr;
    }
    
    .grid > .outline-text-2 {
        display: none;
    }
    
    .grid > h2 {
        grid-column: span 5;
        grid-row: 1;
    }
    
    .grid > h3 {
        grid-column: auto;
    }
    /* IRC Log Formatting */
    .irc-date {
        color: #CCBBBB;
        font-style: italic;
        font-size: xx-small;
    }
    .irc-chrissofer, .irc-cdr255, .irc-wrena, .irc-orom, .irc-greenhairedboy, .irc-ladygrevolk {
        color: #6B3F00;
    }
    .irc-todo, .irc-kass {
        color: #00D742;
    }
    .irc-bronnie, .irc-bron, .irc-ed627, .irc-bronnis, .irc-bronward, .irc-ferath {
        color: #00D3D7;
    }
    .irc-ember {
        color: #FF9000;
    }
    .irc-gwynn, .irc-gwynnn, .irc-strangers, .irc-hooded, .irc-hood, .irc-x {
        color: #FF00DB;
    }
    .irc-danni, .irc-twoorcfouryou, .irc-thegreatorchope, .irc-renrik, .irc-lyco {
        color: #0D00FF;
    }
    .irc-dayra, .irc-dare, .irc-daredibryn {
        color: #AEFF00;
    }
    .irc-gameserv, .irc-chanserv {
        color: #BBCCBB;
    }
    .irc-roll {
        color: #CCBBBB;
        font-size: small;
    }
    .irc-arrow {
        font-size: large;
        color: #CCBBBB;
    }
  #+end_src
